<!DOCTYPE html>
<html lang="en" manifest="cache.appmanifest">

<head>
<meta charset="utf-8">

<title>Drinking Diary</title>

<link rel="shortcut icon" sizes="16x16" href="cocktail_16.png">
<link rel="apple-touch-icon" sizes="57x57" href="cocktail_57.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0">
<link rel="apple-touch-startup-image" href="startup_320x460.png">

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.4/jquery.mobile-1.4.4.min.css" />
<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.4.4/jquery.mobile-1.4.4.min.js"></script>

<!-- polyfill indexeddb -> websql adapter ftw! -->
<script src="http://nparashuram.com/IndexedDBShim/dist/IndexedDBShim.min.js"></script>
<script src="http://nparashuram.com/jquery-indexeddb/dist/jquery.indexeddb.js"></script>

<script type="text/javascript">

'use strict';

$.fx.off = true;

function formatDate(date) {
    console.assert(date != null);
    var day = ("0" + date.getDate()).slice(-2);
    var month = ("0" + (date.getMonth() + 1)).slice(-2);
    return date.getFullYear()+"-"+(month)+"-"+(day) ;
}
String.format = function() {
    var s = arguments[0];
    for (var i = 0; i < arguments.length - 1; i++) {
        var reg = new RegExp("\\{" + i + "\\}", "gm");
        s = s.replace(reg, arguments[i + 1]);
    }
    return s;
}

function showerror(a, e) {
    console.log("Action error", a, e);
}

var myns = {};
myns.ui = {};
myns.db = {};


var DB_NAME = "drinks_dev_3";
var STORE_NAME_DRINKS = "drink";
var STORE_NAME_SERVINGS = "serving";
var STORE_NAME_CONSUMPTIONS = "consumption";
var ALL_STORES = [ STORE_NAME_DRINKS, STORE_NAME_SERVINGS, STORE_NAME_CONSUMPTIONS ];
var RO = "readonly";
var RW = "readwrite";


myns.db.getdb = function() { return $.indexedDB(DB_NAME); };


function Page(selector) {
    var self = this;
    this.value = null;
    this.selector = selector;
    this.getPage = function() {
        return $(selector);
    }
    this.jq = this.getPage;
    this.find = function() {
        var s1 = self.jq();
        return s1.find.apply(s1, arguments);
    };
    this.handle = function(handler_fn) {
        // mediator to get 'this' correctly in handler functions
        // $('...').click(page_obj.handle(page_obj.callback))
        return function() {
            return handler_fn.call(self, arguments);
        }
    };
    $(function() {
        var page = self.getPage();
        page.on("pagebeforeshow", self.handle(self.show_));
        page.on("pagehide", self.handle(self.hide_));
        page.data('page_obj', self);
        //page.find('.btn-delete').hide();
        });
    this.show_ = function() {
        this.show();
    }
    this.hide_ = function() {
        var page = self.getPage();
        self.value = null;
        self.hide();
        //page.find('.btn-delete').hide();
    }
}
function _(promise){
    $.mobile.loading('show');
    promise.then(function(a, e){
        console.log("Action completed done", e.type, a, e);
        $.mobile.loading('hide');
        }, function(a, e){
        console.log("Action completed rejected", a, e);
        $.mobile.loading('hide');
        }, function(a, e){
        console.log("Action completed progress", a, e);
        $.mobile.loading('hide');
        });
}



$(function() {


    $('.btn-add, .btn-save, .btn-delete, .btn-cancel, .btn-back').addClass('btn btn-icon-left');
    $('.btn-edit').addClass('btn btn-icon-right');

    $('.btn').addClass('ui-btn');
    $('.btn-icon-left').addClass('ui-btn-icon-left');
    $('.btn-icon-right').addClass('ui-btn-icon-right');


    $('.btn-edit').addClass('ui-icon-edit');
    $('.btn-add').addClass('ui-icon-plus');
    $('.btn-save').addClass('ui-icon-check ui-btn-inline');
    $('.btn-delete').addClass('ui-icon-delete ui-btn-inline');
    $('.btn-cancel').addClass('ui-icon-back ui-btn-inline');
    $('.btn-back').addClass('ui-icon-back ui-btn-b');


    $('.ui-btn').addClass('ui-shadow ui-corner-all');

    $('.develop').each(function() {
        var selector = 'a[href="#'+ $(this).attr('id')+'"]';
        $(selector).hide();
        });



    $.indexedDB(DB_NAME, {
        "schema": {
        "1": function(transaction) {
        var store_servings = transaction.createObjectStore(STORE_NAME_SERVINGS, {keyPath: "name"});
        var store_drinks = transaction.createObjectStore(STORE_NAME_DRINKS, {keyPath: "name"});
        var store_consumptions = transaction.createObjectStore(STORE_NAME_CONSUMPTIONS, {keyPath: "date"});


        [ {name:"Halbe", liter: 0.5},
        {name:"Seiterl", liter: 0.3},
        {name:"1/4erl", liter: 0.25},
        {name:"1/8erl", liter: 0.125},
        {name:"2cl", liter: 0.02},
        {name:"4cl", liter: 0.04},
        {name:"Flasche (0.75)", liter: 0.75}
        ].forEach(function (d) {

          _store_servings.add(d);
          });

        [ {name:"Bier", calories:100, alc:5, servings:["Halbe", "Seiterl"]},
          {name:"Wein", calories:100, alc:9, servings:["1/8erl"]},
          {name:"Spritzer", calories: 100, alc:4, servings:["1/4erl", "Halbe"]},
          {name:"Sekt", calories: 100, alc:4, servings:["1/8erl", "Flasche (0.75)"]}
        ].forEach(function (d) {

            store_drinks.add(d);
            });

        },
        }
    }).then(function() {
          if ($.mobile.activePage.attr('id') == 'page-main') {
          page_main.show();
          }
          }, showerror);
});


$(document).on('pagebeforecreate', '', function (event) {
    $(event.target).append('<div data-role="footer" style="text-align: center"><small>Copyright &copy; 2014 <a href="mailto:mru@sisyphus.teil.cc">mru@sisyphus.teil.cc</a></small></div>')} 
    );

</script>

</head>
<body>






<div data-role="page" id="page-main" class="page">
  <script>
"use strict";
function previousDay(date) {
    return new Date(date.getFullYear(), date.getMonth(), date.getDate()-1);
}
function createConsumptionHTML(value) {
    var now = new Date();
    var today = formatDate(now);
    var yesterday = formatDate(previousDay(now));
    var is_today = value.date == today;
    var is_yesterday = value.date == yesterday;
    return $(String.format('<li><a href="#page-consumption-details" class="btn-edit ui-btn ui-btn-icon-right ui-icon-edit">{0}{2}: {1}</a></li>',
          value.date,
          value.drinks
          .map(function(drink) {return String.format("{0} {1} {2}", drink.amount, drink.servings, drink.drink); })
          .join(', '),
          is_today ? " (today)" : is_yesterday ? " (yesterday)" : ""
          ));
}
var page_main = new Page("#page-main");
page_main.show = function() {

    var target_ul = this.find('.field-list');

    var now = new Date();
    var today = formatDate(now);
    var yesterday = formatDate(previousDay(now));

    myns.db.getdb().objectStore(STORE_NAME_CONSUMPTIONS).get(yesterday).then(function(value) {
        if (value == null) return;
        var elem = createConsumptionHTML(value);
        target_ul.append(elem);
        elem.click(function() { page_consumption_details.value = yesterday; });
        });


    myns.db.getdb().objectStore(STORE_NAME_CONSUMPTIONS).get(today).then(function(value) {
        if (value == null) return;
        var elem = createConsumptionHTML(value);
        target_ul.append(elem);
        elem.click(function() { page_consumption_details.value = today; });
        });
}
page_main.hide = function() { 
    this.find('.field-list').empty();
}
page_main.purge_db = function() {
    _(myns.db.getdb().objectStore(STORE_NAME_CONSUMPTIONS).clear());
    _(myns.db.getdb().objectStore(STORE_NAME_DRINKS).clear());
    _(myns.db.getdb().objectStore(STORE_NAME_SERVINGS).clear());
}
$(function() {
    var page = page_main;
    page.find('.btn-insert-base-data').click(page.handle(page.insert_base_data));
    page.find('.btn-purge-db').click(page.handle(page.purge_db));
    });
  </script>

  <div data-role="header"><h1>Drinking Diary</h1></div>

  <div role="main" class="ui-content">
    <ul class="field-list" data-role="listview" data-inset="true">
    </ul>
    <a href="#page-consumption-details" class="btn-add ui-btn">Add consumption</a>
    <a href="#page-consumptions" class="btn-show-consumptions btn ui-btn ui-btn-icon-left ui-icon-bars">Show all consumptions</a>
    <a href="#page-drinks" class="ui-btn ui-icon-edit ui-btn-icon-left">Edit drinks</a>
    <a href="#page-servings" class="ui-btn ui-icon-edit ui-btn-icon-left">Edit servings</a>
    <a href="#page-stats" class="ui-btn ui-icon-info ui-btn-icon-left">Stats</a>
    <a href="#page-about" class="ui-btn ui-icon-info ui-btn-icon-left">About</a>
    <a href="#page-dump" class="ui-btn ui-icon-info ui-btn-icon-left">DB dump</a>
    <!--button class="btn-purge-db btn">purge db</button-->
  </div>
</div>





<div data-role="page" id="page-consumptions" class="page">
  <script>

"use strict";
var page_consumptions = new Page("#page-consumptions");
page_consumptions.show = function() {
    var target_ul = this.find('.field-list');

    _(myns.db.getdb().objectStore(STORE_NAME_CONSUMPTIONS).each(function(item) {
          var value = item.value;
          var elem = createConsumptionHTML(value);
          target_ul.append(elem);
          elem.click(function() { page_consumption_details.value = item.key; });
          }));
}
page_consumptions.hide = function() {
    this.find('.field-list').empty();
}
  </script>

  <div data-role="header"><h1>My consumptions</h1></div>

  <div role="main" class="ui-content">
    <ul class="field-list" data-role="listview" data-filter="true" data-inset="true"></ul>
    <a href="#page-main" data-direction="reverse" class="btn-back ui-btn ui-btn-b">Back</a>
  </div>
</div>







<div data-role="page" id="page-consumption-details" class="page page-edit">
<script>

"use strict";
function addConsumptionEntry(value) {

    var div = $('#consume-entries');

    var fs = $('<fieldset data-role="controlgroup" data-type="horizontal"></fieldset>');
    div.append(fs);

    var select_amount = $('<select name="amount" id="consume-amount1">');
    var select_serv = $('<select name="serving">');
    var select_drink = $('<select name="drink">');


    for (var i = 1; i <= 20; i++) {
        select_amount.append(String.format('<option value="{0}" {1}>{0}</option>', i, (value != null && i == value.amount ? "selected" : " ")));
    }

    select_serv.append( $( '<option value=""></option>' ) );
    _(myns.db.getdb().objectStore(STORE_NAME_SERVINGS).each(function (item) {
          var serv = item.value;
          var elem = $( String.format('<option value="{0}">{1}</option>', encodeURI(serv.name), serv.name) );
          select_serv.append( elem );
          if (value != null && serv.name == value.servings) elem.attr('selected',"selected").trigger('change');

          }));

    select_drink.append( $( '<option value=""></option>' ) );
    _(myns.db.getdb().objectStore(STORE_NAME_DRINKS).each(function (item) {
          var drink = item.value;
          var elem = $( String.format('<option value="{0}">{1}</option>', encodeURI(drink.name), drink.name) ) ;
          select_drink.append( elem );
          if (value != null && drink.name == value.drink) elem.attr('selected', 'selected').trigger('change');
          }));

    var delete_entry = $('<button title="remove entry" data-inline="true" class="ui-btn ui-icon-delete ui-btn-icon-right">&nbsp;</button>');
    delete_entry.on('click', function() { fs.remove(); });

    fs.append(select_amount).trigger('create');
    fs.append(select_serv).trigger('create');
    fs.append(select_drink).trigger('create');
    fs.append(delete_entry).trigger('create');
    div.append(fs).trigger('create');
}
var page_consumption_details = new Page("#page-consumption-details");
page_consumption_details.show = function() {
    var today;
    if (this.value == null) {
        today = formatDate(new Date());
    }
    else {
        today = this.value;
    }

    var self = this;
    var input_date = this.find('.field-date');
    myns.db.getdb().objectStore(STORE_NAME_CONSUMPTIONS).get(today).then (function(value) {
        if (value) {
        self.find('.field-date').val(value.date);
        value.drinks.forEach(function (d) { addConsumptionEntry(d); });
        self.find('.btn-delete').show();
        } 
        else {
        input_date.val(today);
        addConsumptionEntry();
        }
        }, showerror);
}
page_consumption_details.hide = function() {
    this.value = null;
    this.find('#consume-entries').empty(); 
    this.find('.field-date').val("");
}
page_consumption_details.save = function() {

    var fs = $('#consume-entries fieldset');

    var drinks = [];
    fs.each(function(idx, elem) {
        drinks.push( {
          "amount":$( this ).find ('select[name="amount"]').val(),
          "drink":decodeURI($( this ).find ('select[name="drink"]').val()),
          "servings":decodeURI($( this ).find ('select[name="serving"]').val())
          });
        });

    var value = {"date": this.find('.field-date').val(), "drinks": drinks };
    myns.db.getdb().objectStore(STORE_NAME_CONSUMPTIONS).put(value).then( function() {
        $.mobile.changePage('#page-main');
        }, showerror);
}
page_consumption_details.drop = function() {
    myns.db.getdb().objectStore(STORE_NAME_CONSUMPTIONS)['delete'](this.find('.field-date').val()).then(function() {
        $.mobile.changePage('#page-main');
        }, showerror);
}
page_consumption_details.cancel = function() {
    $.mobile.changePage('#page-main');
}
$(function() {
    var page = page_consumption_details;
    page.find('.btn-add').click(addConsumptionEntry);
    page.find('.btn-save').click(page.handle(page_consumption_details.save));
    page.find('.btn-delete').click(page.handle(page_consumption_details.drop));
    page.find('.btn-cancel').click(page.handle(page_consumption_details.cancel));
    });
</script>

  <div data-role="header"><h1>I consumed</h1></div>

  <div role="main" class="ui-content">
    <form name="consumption" id="consumption-form">
      <input name="date" id="consume-date" class="field-date" type="date">
      <div id="consume-entries" class="field-consumptions">
      </div>
      <datalist id="tags"></datalist>
    </form>

    <button class="btn-add">Add entry</button>

    <button class="btn-save">Save</button>
    <button class="btn-cancel">Cancel</button>
    <button class="btn-delete">Delete</button>
  </div>
</div>








<div data-role="page" id="page-drinks" class="page">
  <script>

"use strict";
function createDrinkHTML(value) {
    return $('<li><a href="#page-drink-details" class="btn-edit ui-btn ui-btn-icon-right ui-icon-edit">'+value.name+'</a></li>');
}
var page_drinks = new Page("#page-drinks");
page_drinks.show = function() {
    var target_ul = this.find('.field-drinks');

    _(myns.db.getdb().objectStore(STORE_NAME_DRINKS).each(function (item) {
          var elem = createDrinkHTML(item.value);
          target_ul.append(elem);
          elem.click(function() { page_drink_details.value = item.value });
          }));
}
page_drinks.hide = function() {
    this.find('.field-drinks').empty();
}
  </script>

  <div data-role="header"><h1>Drinks</h1></div>

  <div role="main" class="ui-content">
    <ul class="field-drinks" data-role="listview" data-filter="true" data-inset="true"></ul>

    <a href="#page-drink-details" class="btn-add ui-btn">Add drink</a>
    <a href="#page-main" data-direction="reverse" class="btn-back ui-btn ui-btn-b">Back</a>
  </div>
</div>






<div data-role="page" id="page-drink-details" class="page page-edit">
  <script>

"use strict";
var page_drink_details = new Page("#page-drink-details");
page_drink_details.show = function() {
    if (this.value != null) {
        this.find('.field-name').val(this.value.name);
        this.find('.field-alc').val(this.value.alc);
        this.find('.field-calories').val(this.value.calories);
        this.find('.btn-delete').show()
    }
}
page_drink_details.hide = function() {
    this.find('.field-name').val('');
    this.find('.field-alc').val('');
    this.find('.field-calories').val('');
}
page_drink_details.save = function() {
    var value = {
        'name': this.find('.field-name').val(),
        'alc': this.find('.field-alc').val(),
        'calories': this.find('.field-calories').val()
    };
    myns.db.getdb().objectStore(STORE_NAME_DRINKS).put(value).then(function() {
        $.mobile.changePage('#page-drinks');
        }, showerror);
}
page_drink_details.validate = function() {
}
page_drink_details.drop = function() {
    var key = this.find('.field-name').val();
    myns.db.getdb().objectStore(STORE_NAME_DRINKS)['delete'](key).then(function() {
        $.mobile.changePage('#page-servings');
        }, showerror);
}
$(function() {
    var page = page_drink_details;
    page.find('.btn-save').click(page.handle(page.save));
    page.find('.btn-delete').click(page.handle(page.drop));
    });
  </script>

  <div data-role="header"><h1>Drink</h1></div>

  <div role="main" class="ui-content">
    <table data-role="table">
      <thead>
        <tr><th>Name</th><th>Alc %</th><th>Calories per liter</th></tr>
      </thead>
      <tbody>
      <tr>
        <th><input class="drink-details-name field-name"></th>
        <td><input class="drink-details-alc field-alc" type="number"></td>
        <td><input class="drink-details-calories field-calories" type="number"></td>
      </tr>
      </tbody>
    </table>

    <button class="btn-save">Save</button>
    <a href="#page-drinks" data-rel="back" class="btn-cancel">Cancel</a>
    <button class="btn-delete">Delete</button>
  </div>
</div>







<div data-role="page" id="page-servings" class="page">
  <script>
"use strict";
function createServingHTML(value) {
    return $(String.format('<li><a href="#page-serving-details" class="btn-edit btn ui-btn ui-btn-icon-right ui-icon-edit">{0} -- {1}l</a></li>', 
          value.name, 
          value.liter));
}
var page_servings = new Page("#page-servings");
page_servings.show = function() {
    var target_ul = this.find('.field-servings');

    _(myns.db.getdb().objectStore(STORE_NAME_SERVINGS).each(function(item) {
          var value = item.value;
          var elem = createServingHTML(item.value);
          target_ul.append(elem);
          elem.click(function() { page_serving_details.value = value; });
          }));
}
page_servings.hide = function() { 
    this.find('.field-servings').empty();
}
  </script>

  <div data-role="header"><h1>Servings</h1></div>

  <div role="main" class="ui-content">

    <ul class="field-servings" data-role="listview" data-filter="true" data-inset="true"></ul>

    <a href="#page-serving-details" class="btn-add ui-btn">Add serving</a>
    <a href="#page-main" data-direction="reverse" class="btn-back ui-btn">Back</a>
  </div>
</div>




<div data-role="page" id="page-serving-details" class="page page-edit">
  <script>
"use strict";
var page_serving_details = new Page("#page-serving-details");
page_serving_details.show = function () {
    if (this.value != null) {
        this.find(".field-name").val(this.value.name);
        this.find(".field-liters").val(this.value.liter);
        this.find('.btn-delete').show();
    }
}
page_serving_details.hide = function () {
    this.find('.field-name').val('');
    this.find('.field-liters').val('');
}
page_serving_details.save = function() {
    var value = {
        'name': this.find('.field-name').val(),
        'liter': this.find('.field-liters').val(),
    };
    myns.db.getdb().objectStore(STORE_NAME_SERVINGS).put(value).then(function() {
        $.mobile.changePage('#page-servings');
        }, showerror);
}
page_serving_details.drop = function() {
    var key = this.find('.field-name').val();
    myns.db.getdb().objectStore(STORE_NAME_SERVINGS)['delete'](key).then(function() {
        $.mobile.changePage('#page-servings');
        }, showerror);
}

$(function() {
    var page = page_serving_details;
    page.find('.btn-save').click(page.handle(page.save));
    page.find('.btn-delete').click(page.handle(page.drop));
    });
  </script>

  <div data-role="header"><h1>Serving</h1></div>

  <div role="main" class="ui-content">

    <table data-role="table">
      <thead>
        <tr><th>Name</th><th>Liters</th></tr>
      </thead>
      <tbody>
      <tr>
        <th><input class="field-name"></th>
        <td><input type="number" class="field-liters"></td>
      </tr>
      </tbody>
    </table>

    <button class="btn-save">Save</button>
    <a href="#page-servings" data-rel="back" class="btn-cancel">Cancel</a>
    <button class="btn-delete">Delete</button>
  </div>
</div>





<div data-role="page" id="page-about" class="page">

  <div data-role="header"><h1>About</h1></div>

  <div role="main" class="ui-content">

    <h2>Drinking Diary</h2>
    <p><q>It ain't that much!</q> (Anonymous)</p>

    <p>Use your browser's "Add to Home Screen" to install as app.</p>
    <p>All data is stored locally on your device, nothing is ever uploaded.</p>
    <p>Contact:
    <a href="mailto:mru@sisyphus.teil.cc">mru@sisyphus.teil.cc</a>
    </p>

    <a href="#page-main" data-direction="reverse" class="btn-back ui-btn">Back</a>
  </div>
</div>



<script>
"use strict";
var page_db_dump = new Page("#page-dump");
page_db_dump.refresh = function() {
    $('#db-dump-area').text(JSON.stringify(page_db_dump.dump));
}
page_db_dump.show = function () {
    page_db_dump.dump = { consumptions: [], drinks:[], servings: []};
    myns.db.fetchAll(STORE_NAME_CONSUMPTIONS, function(value) {
        page_db_dump.dump.consumptions.push(value);
        }, page_db_dump.refresh);
    myns.db.fetchAll(STORE_NAME_DRINKS, function(value) {
        page_db_dump.dump.drinks.push(value);
        },page_db_dump.refresh);
    myns.db.fetchAll(STORE_NAME_SERVINGS, function(value) {
        page_db_dump.dump.servings.push(value);
        }, page_db_dump.refresh);
}
page_db_dump.hide = function () {
    $('#db-dump-area').text('');
}
page_db_dump.save = function() {
}
page_db_dump.drop = function() {
}
</script>
<div data-role="page" id="page-dump" class="page develop">

  <div data-role="header"><h1>DB Dump</h1></div>

  <div role="main" class="ui-content">

    <textarea id="db-dump-area"></textarea>

    <button class="btn-create-dump">Create dump</button>
    <button class="btn-clear-dump">Clear</button>
    <button class="btn-load-dump">Load dump</button>

    <a href="#page-main" data-direction="reverse" class="btn-back ui-btn">Back</a>
  </div>
</div>




<script>
/**
 * Get the ISO week date week number
 */
Date.prototype.getWeek = function () {
    // Create a copy of this date object
    var target  = new Date(this.valueOf());

    // ISO week date weeks start on monday
    // so correct the day number
    var dayNr   = (this.getDay() + 6) % 7;

    // ISO 8601 states that week 1 is the week
    // with the first thursday of that year.
    // Set the target date to the thursday in the target week
    target.setDate(target.getDate() - dayNr + 3);

    // Store the millisecond value of the target date
    var firstThursday = target.valueOf();

    // Set the target to the first thursday of the year
    // First set the target to january first
    target.setMonth(0, 1);
    // Not a thursday? Correct the date to the next thursday
    if (target.getDay() != 4) {
        target.setMonth(0, 1 + ((4 - target.getDay()) + 7) % 7);
    }

    // The weeknumber is the number of weeks between the 
    // first thursday of the year and the thursday in the target week
    return 1 + Math.ceil((firstThursday - target) / 604800000); // 604800000 = 7 * 24 * 3600 * 1000
}
page_stats = new Page("#page-stats");
page_stats.show = function () {
    page_stats.per_week = {};
    myns.db.fetchAll(STORE_NAME_CONSUMPTIONS, function(value) {
        var date_obj = new Date(value.date);
        var ww = String.format("{0}-{1}", date_obj.getFullYear(), date_obj.getWeek());
        if ( !(ww in page_stats.per_week) ) { page_stats.per_week[ww] = [] }
        page_stats.per_week[ww].push(value);
        }, function() {
        $('#stats-area').text(JSON.stringify(page_stats.per_week));
        });
}
page_stats.hide = function () {
    $('#db-dump-area').text('');
}
</script>
<div data-role="page" id="page-stats" class="page develop">

  <div data-role="header"><h1>Statistics</h1></div>

  <div role="main" class="ui-content">

    <textarea id="stats-area"></textarea>

    <a href="#page-main" data-direction="reverse" class="btn-back ui-btn">Back</a>
  </div>
</div>

</body>
</html>

